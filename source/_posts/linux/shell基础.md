---
title: Shell 基础
date: 2017-02-11
tags: Shell
category: Linux
---

# 头部

第一行形如 #!/bin/bash, #!/bin/sh 的注释是为了指定解析这个脚本的程序。

# 修改脚本属性

这一步主要是给脚本加入可执行权限。


	chmod +x filename.sh

执行脚本

	./filename.sh
	
# 变量


## 定义

* 首个字符必须为字母（a-z，A-Z）。
* 中间不能有空格，可以使用下划线（_）。
* 不能使用标点符号。
* 不能使用bash里的关键字（可用help命令查看保留关键字）。

其中要尤为注意第二条，很多语言的编程规范都会指定等号左右要空开空格统一风格。然而在shell脚本中这样写是不能成功赋值的。

## 使用

### 正常使用

给定义过的变量加上 `$` 符号

$a='a'

echo $a

### 字符串中使用变量

单引号里，所有字符都会按原样输出，所以要在字符串中使用变量只能使用双引号

	name="Jason"
	echo 'I m $name' 
	# 输出 I m $name
	
	echo "I m $name"
	# 输出 I m Jason

有的时候，为了判断变量的边界，可以给变量加上 大括号区分边界。

	prefix="class-"
	echo "Jason is in ${prefix}A"
	# 输出 Jason is in class-A
	

# 参数

在脚本中使用 `$n` （n: 0~n）引用参数，`$0` 比较特别，代表的是当前执行文件的文件名，再往后 `$1` 代表第一个参数、`$2` 代表第二个参数... 此以类推。

除开 $ 后面加数字，还有一些其他的字符可以用于访问参数或参数属性

* 	$#	传递到脚本的参数个数
* 	$*  这是所有参数按顺序以空格间隔组合的字符串
* 	$@	所有参数按顺序组成的数组


# 数组

## 定义

用圆括号包起所有数组元素，数组元素之间用空格隔开

	arr=(a1 a2 a3)
	
	
数组元素读取和大多数语言一样，注意：shell 脚本只支持一维数组

	echo ${arr[1]}

获取数组的所有元素和上一节所有参数的获取类似

	echo ${arr[*]}
	echo ${arr[@]}

但是不要想当然地想到获取数组长度是 `$arr[#]`，# 实际上放在变量前面

	echo ${#arr[@]}

有可能你会发现，上面的大括号，即使不写也可以正确输出，这其实是你的 bash 程序 如（zsh） 可以识别这样的写法，而不是像变量的用来界定变量的大括号可以省略。而在原生的 bash 中， 需要加上大括号才能正确读取。


	
















































